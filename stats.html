<!DOCTYPE html>
<html>
	<head>
		<link rel="manifest" href="manifest.json">
		<meta name="mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="application-name" content="–†–µ–µ—Å—Ç—Ä –∏–Ω–æ–∞–≥–µ–Ω—Ç–æ–≤">
		<meta name="apple-mobile-web-app-title" content="–†–µ–µ—Å—Ç—Ä –∏–Ω–æ–∞–≥–µ–Ω—Ç–æ–≤">
		<meta name="theme-color" content="#eeeeee">
		<meta name="msapplication-navbutton-color" content="#eeeeee">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
		<meta name="msapplication-starturl" content="/">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		<link rel="icon" type="image/jpeg" sizes="256x256" href="https://hsto.org/webt/a_/xt/c_/a_xtc_o6zp8oqpzkamwvuzlayfq.jpeg">
		<link rel="apple-touch-icon" type="image/jpeg" sizes="256x256" href="https://hsto.org/webt/a_/xt/c_/a_xtc_o6zp8oqpzkamwvuzlayfq.jpeg">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>C—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ - –†–µ–µ—Å—Ç—Ä –∏–Ω–æ–∞–≥–µ–Ω—Ç–æ–≤</title>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
		<script src="https://albinodrought.github.io/chartjs-plugin-watermark/chartjs-plugin-watermark.js"></script>
	</head>
	<body>
		<nav class="navbar bg-body-tertiary noprint">
			<div class="container-fluid">
				<span class="navbar-brand mb-0 h1"><img src="https://habrastorage.org/webt/a_/xt/c_/a_xtc_o6zp8oqpzkamwvuzlayfq.jpeg" alt="Logo" width="30" height="30" class="d-inline-block align-text-top"> –†–µ–µ—Å—Ç—Ä –∏–Ω–æ–∞–≥–µ–Ω—Ç–æ–≤</span>
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
				<div class="collapse navbar-collapse" id="navbarNav">
					<ul class="navbar-nav">
						<li class="nav-item"><a class="nav-link active" aria-current="page" href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
						<li class="nav-item"><a class="nav-link" href="stats.html">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a></li>
						<li class="nav-item"><a class="nav-link" href="https://minjust.gov.ru/ru/activity/directions/998/">–†–µ–µ—Å—Ç—Ä –Ω–∞ —Å–∞–π—Ç–µ –ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–∞ –Æ—Å—Ç–∏—Ü–∏–∏</a></li>
						<li class="nav-item"><a class="nav-link" href="https://minjust.gov.ru/ru/events/list/?words=–û+—Ä–µ–µ—Å—Ç—Ä–µ+–∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã—Ö+–∞–≥–µ–Ω—Ç–æ–≤&start_date=&end_date=&page=1">–ü–æ–∏—Å–∫ –ø—Ä–∏—á–∏–Ω—ã –≤–Ω–µ—Å–µ–Ω–∏—è</a></li>
						<li class="nav-item"><a class="nav-link" href="https://github.com/li0ard/registry-of-foreign-agents/">Github</a></li>
					</ul>
				</div>
			</div>
		</nav>
		<div class="container">
			<br>
			<div class="row">
				<center>
					<h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
				</center>
			</div>
			<br>
			<div class="row">
				<div class="col">
					<center>
						<canvas aria-label="–ü–æ —Ç–∏–ø—É –∞–≥–µ–Ω—Ç–∞" role="img" id="type"></canvas>
					</center>
				</div>
				<div class="col">
					<center>
						<canvas aria-label="–ü–æ –∑–∞–∫–æ–Ω—É" role="img" id="law"></canvas>
					</center>
				</div>
			</div>
			<div style="margin-top: 20px;" class="row">
				<center>
					<canvas aria-label="–ö–æ–ª-–≤–æ –≤–∫–ª—é—á–µ–Ω–∏–π –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –ø–æ –≥–æ–¥–∞–º (–î–∏–∞–≥—Ä–∞–º–º–∞)" role="img" id="years"></canvas>
				</center>
			</div>
			<div style="margin-top: 20px;" class="row">
				<center>
					<canvas aria-label="–ö–æ–ª-–≤–æ –≤–∫–ª—é—á–µ–Ω–∏–π –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –ø–æ –≥–æ–¥–∞–º (–ì—Ä–∞—Ñ–∏–∫)" role="img" id="years_line"></canvas>
				</center>
			</div>
			<br>
		</div>
		<footer>
			<center>
				<br>
				<p>&copy; 2023, <a href="https://li0ard.github.io">li0ard</a>. Made with üïäÔ∏è</p>
				<br>
			</center>
		</footer>
		<script type="text/javascript">
			//ff5722
			//00e676
			//1e88e5
			fetch(`https://raw.githubusercontent.com/li0ard/registry-of-foreign-agents/main/registry.json`)
			.then(res => res.json())
			.then(body => {
				let ul = body.filter(i => i.inn.length==10).length
				let fl = body.filter(i => i.inn.length==12).length
				let type = new Chart(document.getElementById('type'), {
					type: 'pie',
					data: {
						labels: ['–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ –ª–∏—Ü–∞', '–§–∏–∑–∏—á–µ—Å–∫–∏–µ –ª–∏—Ü–∞', '–ü—Ä–æ—á–µ–µ'],
						datasets: [{
							data: [ul, fl, body.length-(ul+fl)],
							backgroundColor: ['#ff5722', '#00e676', '#1e88e5'],
							borderWidth: 0.5 ,
							borderColor: '#ddd'
						}]
					},
					options: {
						plugins: {
							title: {
								display: true,
								text: '–ü–æ —Ç–∏–ø—É –∞–≥–µ–Ω—Ç–∞'
							},
							subtitle: {
								display: true,
								text: `–í—Å–µ–≥–æ: ${body.length} –∑–∞–ø–∏—Å–µ–π`
							}
						},
						watermark: {
							image: "https://habrastorage.org/webt/a_/xt/c_/a_xtc_o6zp8oqpzkamwvuzlayfq.jpeg",
							x: 0,
							y: 0,
							width: 48,
							height: 48,
							opacity: 0.3
						}
					}
				});
				//type.canvas.parentNode.style.height = '80vh';
				let law = new Chart(document.getElementById("law"), {
					type: "pie",
					data: {
						labels: ['—Å—Ç. 2.1 272-–§–ó *', '—Å—Ç. 6 –ó–∞–∫–æ–Ω–∞ "–û –°–ú–ò"', '—Å—Ç. 25.1 –ó–∞–∫–æ–Ω–∞ "–û –°–ú–ò" *', 'c—Ç. 29.1 82-–§–ó *', '—Å—Ç. 32 7-–§–ó', '—Å—Ç. 7 255-–§–ó', '—Å—Ç. 9 255-–§–ó'],
						datasets: [{
							data: [
								body.filter(i => i.law.includes("–°—Ç–∞—Ç—å—è 2.1")).length,
								body.filter(i => i.law.includes("–°—Ç–∞—Ç—å—è 6")).length,
								body.filter(i => i.law.includes("–°—Ç–∞—Ç—å—è 25.1")).length,
								body.filter(i => i.law.includes("–°—Ç–∞—Ç—å—è 29.1")).length,
								body.filter(i => i.law.includes("–°—Ç–∞—Ç—å—è 32")).length,
								body.filter(i => i.law.includes("–°—Ç–∞—Ç—å—è 7")).length,
								body.filter(i => i.law.includes("–°—Ç–∞—Ç—å—è 9")).length
							],
							backgroundColor: ['#4dc9f6', '#f67019',  '#f53794', '#acc236', '#00a950', '#58595b', '#8549ba'],
							borderWidth: 0.5 ,
							borderColor: '#ddd'
						}]
					},
					options: {
						plugins: {
							title: {
								display: true,
								text: '–ü–æ –æ—Å–Ω–æ–≤–∞–Ω–∏—é'
							},
							subtitle: {
								display: true,
								text: `* - —Å—Ç–∞—Ç—å—è —É—Ç—Ä–∞—Ç–∏–ª–∞ —Å–∏–ª—É`
							}
						},
						watermark: {
							image: "https://habrastorage.org/webt/a_/xt/c_/a_xtc_o6zp8oqpzkamwvuzlayfq.jpeg",
							x: 0,
							y: 0,
							width: 48,
							height: 48,
							opacity: 0.3
						}
					}
				})
				let years_labes = ["2013","2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022", "2023 *"]
				let years_dt_in = [body.filter(i => i.dateIn.includes("2013")).length, body.filter(i => i.dateIn.includes("2014")).length, body.filter(i => i.dateIn.includes("2015")).length, body.filter(i => i.dateIn.includes("2016")).length, body.filter(i => i.dateIn.includes("2017")).length, body.filter(i => i.dateIn.includes("2018")).length, body.filter(i => i.dateIn.includes("2019")).length, body.filter(i => i.dateIn.includes("2020")).length, body.filter(i => i.dateIn.includes("2021")).length, body.filter(i => i.dateIn.includes("2022")).length, body.filter(i => i.dateIn.includes("2023")).length]

				let years_dt_out = [body.filter(i => i.dateOut.includes("2013")).length, body.filter(i => i.dateOut.includes("2014")).length, body.filter(i => i.dateOut.includes("2015")).length, body.filter(i => i.dateOut.includes("2016")).length, body.filter(i => i.dateOut.includes("2017")).length, body.filter(i => i.dateOut.includes("2018")).length, body.filter(i => i.dateOut.includes("2019")).length, body.filter(i => i.dateOut.includes("2020")).length, body.filter(i => i.dateOut.includes("2021")).length, body.filter(i => i.dateOut.includes("2022")).length, body.filter(i => i.dateOut.includes("2023")).length]
				let years = new Chart(document.getElementById('years'), {
					type: "bar",
					data: {
						labels: years_labes,
						datasets: [
							{
								label: '–í–Ω–µ—Å–µ–Ω–æ',
								backgroundColor: ["#1e88e5"],
								data: years_dt_in
							},
							{
								label: '–ò—Å–∫–ª—é—á–µ–Ω–æ',
								backgroundColor: "#ff5722",
								data: years_dt_out
							}
						]
					},
					options: {
						plugins: {
							title: {
								display: true,
								text: '–ü–æ –∫–æ–ª-–≤—É –≤–Ω–µ—Å–µ–Ω–∏–π/–∏—Å–∫–ª—é—á–µ–Ω–∏–π (–î–∏–∞–≥—Ä–∞–º–º–∞)'
							},
							subtitle: {
								display: true,
								text: '* - –Ω–∞ –º–æ–º–µ–Ω—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è'
							}
						},
						watermark: {
							image: "https://habrastorage.org/webt/a_/xt/c_/a_xtc_o6zp8oqpzkamwvuzlayfq.jpeg",
							x: 0,
							y: 0,
							width: 48,
							height: 48,
							opacity: 0.3
						}
					}
				})
				let years_line = new Chart(document.getElementById('years_line'), {
					type: "line",
					data: {
						labels: years_labes,
						datasets: [
							{
								label: '–í–Ω–µ—Å–µ–Ω–æ',
								backgroundColor: "#1e88e5",
								borderColor: "#1e88e5",
								data: years_dt_in,
								pointStyle: 'circle',
								pointRadius: 5,
								pointHoverRadius: 10
							},
							{
								label: '–ò—Å–∫–ª—é—á–µ–Ω–æ',
								backgroundColor: "#ff5722",
								borderColor: "#ff5722",
								data: years_dt_out,
								pointStyle: 'circle',
								pointRadius: 5,
								pointHoverRadius: 10
							}
						]
					},
					options: {
						plugins: {
							title: {
								display: true,
								text: '–ü–æ –∫–æ–ª-–≤—É –≤–Ω–µ—Å–µ–Ω–∏–π/–∏—Å–∫–ª—é—á–µ–Ω–∏–π (–ì—Ä–∞—Ñ–∏–∫)'
							},
							subtitle: {
								display: true,
								text: '* - –Ω–∞ –º–æ–º–µ–Ω—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è'
							}
						},
						watermark: {
							image: "https://habrastorage.org/webt/a_/xt/c_/a_xtc_o6zp8oqpzkamwvuzlayfq.jpeg",
							x: 0,
							y: 0,
							width: 48,
							height: 48,
							opacity: 0.3
						}
					}
				})
			})
		</script>
	</body>
</html>
